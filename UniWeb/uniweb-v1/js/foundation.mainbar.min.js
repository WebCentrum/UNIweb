!function(a,t,s,e){"use strict";Foundation.libs.mainbar={name:"mainbar",version:"5.5.2",settings:{index:0,start_offset:0,sticky_class:"sticky-sec",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!1,sticky_on:"all",dropdown_autoclose:!0},init:function(t,s,e){Foundation.inherit(this,"add_custom_rule register_media throttle");var i=this;i.register_media("mainbar","foundation-mq-mainbar"),this.bindings(s,e),i.S("["+this.attr_name()+"]",this.scope).each(function(){var t=a(this),s=t.data(i.attr_name(!0)+"-init");i.S("section, .main-bar-section",this);t.data("index",0);var e=t.parent();e.hasClass("fixed")||i.is_sticky(t,e,s)?(i.settings.sticky_class=s.sticky_class,i.settings.sticky_mainbar=t,t.data("height",e.outerHeight()),t.data("stickyoffset",e.offset().top)):t.data("height",t.outerHeight()),s.assembled||i.assemble(t),s.is_hover?i.S(".has-dropdown",t).addClass("not-click"):i.S(".has-dropdown",t).removeClass("not-click"),i.add_custom_rule(".f-mainbar-fixed { padding-top: "+t.data("height")+"px }"),e.hasClass("fixed")&&i.S("body").addClass("f-mainbar-fixed")})},is_sticky:function(a,t,s){var e=t.hasClass(s.sticky_class),i=matchMedia(Foundation.media_queries.small).matches,n=matchMedia(Foundation.media_queries.medium).matches,o=matchMedia(Foundation.media_queries.large).matches;return e&&"all"===s.sticky_on?!0:e&&this.small()&&-1!==s.sticky_on.indexOf("small")&&i&&!n&&!o?!0:e&&this.medium()&&-1!==s.sticky_on.indexOf("medium")&&i&&n&&!o?!0:e&&this.large()&&-1!==s.sticky_on.indexOf("large")&&i&&n&&o?!0:!1},toggle:function(s){var e,i=this;e=s?i.S(s).closest("["+this.attr_name()+"]"):i.S("["+this.attr_name()+"]");var n=e.data(this.attr_name(!0)+"-init"),o=i.S("section, .main-bar-section",e);i.breakpoint()&&(i.rtl?(o.css({right:"0%"}),a(">.name",o).css({right:"100%"})):(o.css({left:"0%"}),a(">.name",o).css({left:"100%"})),i.S("li.moved",o).removeClass("moved"),e.data("index",0),e.toggleClass("expanded").css("height","")),n.scrolltop?e.hasClass("expanded")?e.parent().hasClass("fixed")&&(n.scrolltop?(e.parent().removeClass("fixed"),e.addClass("fixed"),i.S("body").removeClass("f-mainbar-fixed"),t.scrollTo(0,0)):e.parent().removeClass("expanded")):e.hasClass("fixed")&&(e.parent().addClass("fixed"),e.removeClass("fixed"),i.S("body").addClass("f-mainbar-fixed")):(i.is_sticky(e,e.parent(),n)&&e.parent().addClass("fixed"),e.parent().hasClass("fixed")&&(e.hasClass("expanded")?(e.addClass("fixed"),e.parent().addClass("expanded"),i.S("body").addClass("f-mainbar-fixed")):(e.removeClass("fixed"),e.parent().removeClass("expanded"),i.update_sticky_positioning())))},timer:null,events:function(s){var e=this,i=this.S;i(this.scope).off(".mainbar").on("click.fndtn.mainbar","["+this.attr_name()+"] .toggle-mainbar",function(a){a.preventDefault(),e.toggle(this)}).on("click.fndtn.mainbar contextmenu.fndtn.mainbar",'.main-bar .main-bar-section li a[href^="#"],['+this.attr_name()+'] .main-bar-section li a[href^="#"]',function(t){var s=a(this).closest("li"),i=s.closest("["+e.attr_name()+"]"),n=i.data(e.attr_name(!0)+"-init");if(n.dropdown_autoclose&&n.is_hover){var o=a(this).closest(".hover");o.removeClass("hover")}!e.breakpoint()||s.hasClass("back")||s.hasClass("has-dropdown")||e.toggle()}).on("click.fndtn.mainbar","["+this.attr_name()+"] li.has-dropdown",function(t){var s=i(this),n=i(t.target),o=s.closest("["+e.attr_name()+"]"),r=o.data(e.attr_name(!0)+"-init");return n.data("revealId")?void e.toggle():void(e.breakpoint()||(!r.is_hover||Modernizr.touch)&&(t.stopImmediatePropagation(),s.hasClass("hover")?(s.removeClass("hover").find("li").removeClass("hover"),s.parents("li.hover").removeClass("hover")):(s.addClass("hover"),a(s).siblings().removeClass("hover"),"A"===n[0].nodeName&&n.parent().hasClass("has-dropdown")&&t.preventDefault())))}).on("click.fndtn.mainbar","["+this.attr_name()+"] .has-dropdown>a",function(a){if(e.breakpoint()){a.preventDefault();var t=i(this),s=t.closest("["+e.attr_name()+"]"),n=s.find("section, .main-bar-section"),o=(t.next(".dropdown").outerHeight(),t.closest("li"));s.data("index",s.data("index")+1),o.addClass("moved"),e.rtl?(n.css({right:-(100*s.data("index"))+"%"}),n.find(">.name").css({right:100*s.data("index")+"%"})):(n.css({left:-(100*s.data("index"))+"%"}),n.find(">.name").css({left:100*s.data("index")+"%"})),s.css("height",t.siblings("ul").outerHeight(!0)+s.data("height"))}}),i(t).off(".mainbar").on("resize.fndtn.mainbar",e.throttle(function(){e.resize.call(e)},50)).trigger("resize.fndtn.mainbar").load(function(){i(this).trigger("resize.fndtn.mainbar")}),i("body").off(".mainbar").on("click.fndtn.mainbar",function(a){var t=i(a.target).closest("li").closest("li.hover");t.length>0||i("["+e.attr_name()+"] li.hover").removeClass("hover")}),i(this.scope).on("click.fndtn.mainbar","["+this.attr_name()+"] .has-dropdown .back",function(a){a.preventDefault();var t=i(this),s=t.closest("["+e.attr_name()+"]"),n=s.find("section, .main-bar-section"),o=(s.data(e.attr_name(!0)+"-init"),t.closest("li.moved")),r=o.parent();s.data("index",s.data("index")-1),e.rtl?(n.css({right:-(100*s.data("index"))+"%"}),n.find(">.name").css({right:100*s.data("index")+"%"})):(n.css({left:-(100*s.data("index"))+"%"}),n.find(">.name").css({left:100*s.data("index")+"%"})),0===s.data("index")?s.css("height",""):s.css("height",r.outerHeight(!0)+s.data("height")),setTimeout(function(){o.removeClass("moved")},300)}),i(this.scope).find(".dropdown a").focus(function(){a(this).parents(".has-dropdown").addClass("hover")}).blur(function(){a(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var a=this;a.S("["+this.attr_name()+"]").each(function(){var t,e=a.S(this),i=e.data(a.attr_name(!0)+"-init"),n=e.parent("."+a.settings.sticky_class);if(!a.breakpoint()){var o=e.hasClass("expanded");e.css("height","").removeClass("expanded").find("li").removeClass("hover"),o&&a.toggle(e)}a.is_sticky(e,n,i)&&(n.hasClass("fixed")?(n.removeClass("fixed"),t=n.offset().top,a.S(s.body).hasClass("f-mainbar-fixed")&&(t-=e.data("height")),e.data("stickyoffset",t),n.addClass("fixed")):(t=n.offset().top,e.data("stickyoffset",t)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.mainbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(t){var s=this,e=t.data(this.attr_name(!0)+"-init"),i=s.S("section, .main-bar-section",t);i.detach(),s.S(".has-dropdown>a",i).each(function(){var t,i=s.S(this),n=i.siblings(".dropdown"),o=i.attr("href");n.find(".title.back").length||(t=a(1==e.mobile_show_parent_link&&o?'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link hide-for-medium-up"><a class="parent-link js-generated" href="'+o+'">'+i.html()+"</a></li>":'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),1==e.custom_back_text?a("h5>a",t).html("<i class='fa fa-reply'></i>"):a("h5>a",t).html("&laquo; "+i.html()),n.prepend(t))}),i.appendTo(t),this.sticky(),this.assembled(t)},assembled:function(t){t.data(this.attr_name(!0),a.extend({},t.data(this.attr_name(!0)),{assembled:!0}))},height:function(t){var s=0,e=this;return a("> li",t).each(function(){s+=e.S(this).outerHeight(!0)}),s},sticky:function(){var a=this;this.S(t).on("scroll",function(){a.update_sticky_positioning()})},update_sticky_positioning:function(){var s="."+this.settings.sticky_class,e=(this.S(t),this),i=a("#sec-top-bar-wrapper").height();if(e.settings.sticky_mainbar&&e.is_sticky(this.settings.sticky_mainbar,this.settings.sticky_mainbar.parent(),this.settings)){var n=this.settings.sticky_mainbar.data("stickyoffset")+this.settings.start_offset;e.S(s).hasClass("expanded")||(a(t).scrollTop()>n?e.S(s).hasClass("fixed")||(a("#sec-top-bar-placeholder").css("height",i),e.S(s).addClass("fixed"),e.S("body").addClass("f-mainbar-fixed")):a(t).scrollTop()<=n&&e.S(s).hasClass("fixed")&&(a("#sec-top-bar-placeholder").css("height",0),e.S(s).removeClass("fixed"),e.S("body").removeClass("f-mainbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.mainbar"),this.S(t).off(".fndtn.mainbar")},reflow:function(){}}}(jQuery,window,window.document);